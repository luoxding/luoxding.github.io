<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>在家用群晖搭建wordpress博客_群晖 博客-CSDN博客 - note publish</title>
  </head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">note publish</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">在家用群晖搭建wordpress博客_群晖 博客-CSDN博客</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1714153551697"
                  >2024-04-27 01:45</time
                ></span
              >
              <span
                >Updated At：<time datetime="1714153551697"
                  >2024-04-27 01:45</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h3><a id="t0" class="jop-noMdConv"></a></h3>
<p>在家用群晖搭建wordpress博客</p>
<p>首先需要一台群晖的NAS</p>
<p><strong>什么是NAS？</strong></p>
<p>NAS主要的作用就是网络储存，你可以理解为百度云，但这个百度云的服务器放在了家里。个人而言，有了NAS以后，家里的所有设备（台式电脑，笔记本电脑，手机，平板等等一切能联wifi的设备）都能访问这台NAS，共享资料。这样省去了经常需要互拷资料的麻烦，举个例子：有了NAS以后，你想用手机看电脑刚下载好的电影，你不需要拿出数据线拷电影，你只需要把电影拉进去NAS，然后手机访问这台NAS，就能观看。NAS能做的不仅仅是储存，它还能作为一台简单的服务器，完成一些相对简单的工作，例如在家自建博客（本博客就是建立在家里的NAS上的）。当然，NAS还有许许多多的优点，在此就不一一列举了。</p>
<p>本人用的是群晖的DS214play，截止至2018年6月7日，升级款貌似已经更新到DS218play了，同时214play目前也已经停产。</p>
<p>建立博客时群晖的版本号为：DSM 6.1.7-15284</p>
<p>在建立博客时，看了许多教程，发现有些设置和现在大不相同，导致经常卡在某个地方，每个晚上不停地查资料不停地尝试，断断续续花了一周时间，才最终建立完成，当然还有许多地方个人觉得有需要再润色一下。</p>
<p>或许本文里的一些设置，在不久的将来因为群晖的更新而失效，所以此文权当记录。</p>
<p>好，废话少说，进入正题。</p>
<p>一、安装wordpress博客</p>
<p>博客程序有很多种，例如zblog，emlog等等等等，但最多人用的还是wordpress，个人也倾向于使用热门的东西，毕竟多人用，教程多，出了问题也好找解决方案。</p>
<p>先去群晖的套件中心安装以下3个套件<a title="https://www.moks.cc/wp-content/uploads/2018/06/FK2O9JO1UOMZEPJG.png" href="https://www.moks.cc/wp-content/uploads/2018/06/FK2O9JO1UOMZEPJG.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/FK2O9JO1UOMZEPJG.png" /></a></p>
<p>分别是：</p>
<p>Web Station</p>
<p>phpMyAdmin</p>
<p>MariaDB 10（现在安装MariaDB的时候貌似要先设置密码了，记住用户名和密码就行）</p>
<p>当安装完web station这个套件以后，在file station就能发现多了一个“web”的文件夹∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/PZRA2FK2I45SGHN.jpg" href="https://www.moks.cc/wp-content/uploads/2018/06/PZRA2FK2I45SGHN.jpg"><img src="https://www.moks.cc/wp-content/uploads/2018/06/PZRA2FK2I45SGHN.jpg" /></a></p>
<p>于是我就在我的电脑那里添加了这个文件夹，方便处理数据∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607005739.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607005739.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607005739.png" /></a></p>
<p>现在可以开始安装wordpress了，其实群晖的套件中心里也有wordpress，虽然安装起来比较方便，但不能自动更新，而且后续外网访问的设置貌似会有点问题，所以个人强烈建议不要在套件中心安装。</p>
<p>百度“wordpress 下载” ，找到官网https://cn.wordpress.org/，然后把wordpress程序的压缩包下载下来。∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010009.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010009.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010009.png" /></a></p>
<p>直接拉进去“web”文件夹里面，然后解压缩，得到一个“wordpress”的文件夹∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010052.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010052.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010052.png" /></a></p>
<p>这个“wordpress”的文件夹就是博客网站了。</p>
<p>接下来设置“wordpress”的文件夹的读写权限，不然安装过程会有问题，而且后续装完博客也无法安装新主题</p>
<p>在file station里面打开“web”，找到“wordpress”，右击“wordpress”文件夹，点击“属性”，∇</p>
<p><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607010410.png" /></p>
<p>选择“权限“。把所有http的权限都改为”读取&amp;写入“。一开始可能不能修改，所以要先选择高级选项-使继承权限显式化。∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/SRP63RELPZZ5K@RG.jpg" href="https://www.moks.cc/wp-content/uploads/2018/06/SRP63RELPZZ5K@RG.jpg"><img src="https://www.moks.cc/wp-content/uploads/2018/06/SRP63RELPZZ5K@RG.jpg" /></a></p>
<p>完成以后如下图∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/MW15V7HLJTREX406P.jpg" href="https://www.moks.cc/wp-content/uploads/2018/06/MW15V7HLJTREX406P.jpg"><img src="https://www.moks.cc/wp-content/uploads/2018/06/MW15V7HLJTREX406P.jpg" /></a></p>
<p>在浏览器输入http://群晖IP/phpMyAdmin/ （注意大小写）∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607233549.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607233549.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607233549.png" /></a></p>
<p>密码如果已经设置了，就填你设置的密码，如果没有，那就不用填。不过进去以后建议立刻修改密码，因为如果安装完博客以后，再去设置密码的话，会导致访问出错。这时候你就需要找到wordpress文件夹的wp-config.php文件，记事本打开，修改define(‘DB_PASSWORD’, ‘空间数据库最新密码’)</p>
<p>进入以后新建数据库，用于存储以后博客的数据信息。名称为<strong>wordpress</strong>（数据库名字不一定要wordpress，你想改什么就什么，记住就好），排序规则选<strong>utf8_unicode_ci</strong>,如图∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/PCXMQDFPVAFCA15T0753.png" href="https://www.moks.cc/wp-content/uploads/2018/06/PCXMQDFPVAFCA15T0753.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/PCXMQDFPVAFCA15T0753.png" /></a></p>
<p>数据库建立完成。</p>
<p>打开“web station“-”虚拟主机“-”新建“。下图是我的配置∇</p>
<p><img src="https://www.moks.cc/wp-content/uploads/2018/06/L862JB15DWUA_TCPC7I.jpg" /></p>
<p>端口数字一般是随便填的，我填了<strong>666</strong>。“文档根目录“要选择你博客程序的所在位置，HTTP和PHP也记得要勾选。</p>
<p>然后”PHP设置“-双击Default Profile配置文件-勾选全部扩展名（用新版群晖系统要这样做，之前旧版并不需要，导致卡在这里好久）∇<a title="https://www.moks.cc/wp-content/uploads/2018/06/SFA@H5Z6MCEQM4.jpg" href="https://www.moks.cc/wp-content/uploads/2018/06/SFA@H5Z6MCEQM4.jpg"><img src="https://www.moks.cc/wp-content/uploads/2018/06/SFA@H5Z6MCEQM4.jpg" /></a></p>
<p>接下来就可以开始安装博客了</p>
<p>在浏览器输入群晖的IP及端口号666, <a title="http://xn--IP-u37dl93g:666/" href="http://xn--IP-u37dl93g:666/">http://群晖IP:666/</a></p>
<p>接下去就按照提示安装就可以了∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607234445.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607234445.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180607234445.png" /></a></p>
<p>输入用户名和密码，数据库主机填<strong>127.0.0.1:3307</strong>点击提交∇</p>
<p>（数据库主机一开始可以先试试填localhost，之前我装的时候填localhost就安装成功，但后来就不行了，这里也卡了很久）</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/RDVSUUGFR_E0FFO9B.png" href="https://www.moks.cc/wp-content/uploads/2018/06/RDVSUUGFR_E0FFO9B.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/RDVSUUGFR_E0FFO9B.png" /></a></p>
<p>点击提交，提交以后没问题的话就没问题了，有问题的话就要看看是否前面的步骤设置出现问题。如果还是问题的话，慢慢查资料吧。</p>
<p>下面就按照步骤来就好。∇<br />
<a title="https://www.moks.cc/wp-content/uploads/2018/06/5D5V@XL047H9CUSDWCX.png" href="https://www.moks.cc/wp-content/uploads/2018/06/5D5V@XL047H9CUSDWCX.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/5D5V@XL047H9CUSDWCX.png" /></a></p>
<p>至此，博客已经安装完毕。你只需要输入你群晖的IP地址+端口号，就能访问编辑你的博客了。</p>
<p>在安装完博客以后，会遇到更新站点、主题和插件时，出现输入FTP账号密码问题。∇<a title="https://www.moks.cc/wp-content/uploads/2018/06/M02J2YUUOUG06O.png" href="https://www.moks.cc/wp-content/uploads/2018/06/M02J2YUUOUG06O.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/M02J2YUUOUG06O.png" /></a></p>
<p>其实这个是因为php没有取得写入权限的问题。解决办法就是打开wp-config.php，在最后添加一段代码：<br />
define(“FS_METHOD”, “direct”);<br />
define(“FS_CHMOD_DIR”, 0777);<br />
define(“FS_CHMOD_FILE”, 0777);</p>
<p><strong>20190326更新</strong></p>
<p>评论有反馈这个FTP设置失效，然后找到了新的解决方法供参考：<a title="http://zhanglinhai.com/archives/912" href="http://zhanglinhai.com/archives/912">http://zhanglinhai.com/archives/912</a></p>
<p>二.外网访问的设置</p>
<p>上面安装完博客以后,你只能在家里局域网访问你的博客,下面就来进行外网访问博客的设置.</p>
<p>首先,你要设置好DDNS,可以参考我写的这篇<a title="https://www.moks.cc/?p=9" href="https://www.moks.cc/?p=9">《用自己的域名设置DDNS，外网访问群晖》</a></p>
<p>设置好DDNS以后，再设置好端口转发∇<br />
<a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111529.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111529.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111529.png" /></a></p>
<p>然后修改wordpress后台设置里的两个URL地址。∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111517.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111517.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608111517.png" /></a></p>
<p>这时候用外网在浏览器输入www.moks.cc/:666,就能访问你的博客了。</p>
<p><strong>其实到这里本文就可以结束了。</strong></p>
<p><strong>但是</strong></p>
<p>我觉得域名后面加了端口号一点都不酷炫，即使它是666</p>
<p>所以接下来我要进一步设置，去掉端口号。</p>
<p>首先进入群晖的web station，勾选“<strong>基于名称</strong>”-主机名填写你的域名，其他设置如图，点确定∇<a title="https://www.moks.cc/wp-content/uploads/2018/06/VL2DQ83TUF2VO@MST.jpg" href="https://www.moks.cc/wp-content/uploads/2018/06/VL2DQ83TUF2VO@MST.jpg"><img src="https://www.moks.cc/wp-content/uploads/2018/06/VL2DQ83TUF2VO@MST.jpg" /></a></p>
<p>然后进入你的博客后台，修改两个地址为<strong><a title="https://xn--6qqv7i2xdt95b" href="https://xn--6qqv7i2xdt95b">https://你的域名</a></strong>（注意http<strong>s</strong>的<strong>s</strong>不要漏掉）。如图∇<br />
<a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E5%9B%BE%E7%89%8720180608113118.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E5%9B%BE%E7%89%8720180608113118.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E5%9B%BE%E7%89%8720180608113118.png" /></a></p>
<p>然后做好端口转发</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608113316.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608113316.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608113316.png" /></a></p>
<p>都完成以后，你用万网输入https://你的域名（注意https的s不要漏掉），就能访问到你的博客了。</p>
<p>这里稍微解释一下，http协议默认是80端口，https默认是443端口，其实我们平时输入网址的时候后面是有端口的，因为默认的关系所以直接隐去了。而国内的80端口基本都封掉了，所以我们博客打算域名无端口号访问，只能采用443端口。</p>
<p>然后这时候你会发现，在访问的时候，你的浏览器会发出不安全警告∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/2HR12I_9LN8QOQIT7XBVQ.png" href="https://www.moks.cc/wp-content/uploads/2018/06/2HR12I_9LN8QOQIT7XBVQ.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/2HR12I_9LN8QOQIT7XBVQ.png" /></a></p>
<p>其实可以不用理会，但是看着总是不舒服。所以还要进行下一步操作。具体请参考我的另一篇文章<a title="https://www.moks.cc/?p=124" href="https://www.moks.cc/?p=124">《群晖部署阿里云申请的免费证书》</a></p>
<p>这样设置完以后，再访问的时候就不会有警告了，而且用chrome浏览器，还有一把绿色的小锁。∇<a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608174050.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608174050.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180608174050.png" /></a></p>
<p>不过缺点也有，如果设备第一次访问的话，要打全网址，即https://www.moks.cc。前面的https://不能漏掉。</p>
<p>感觉还没有www.moks.cc/:666方便。</p>
<p>所以我打算再折腾一下，尽量输入更短的网址就能访问到博客。参考这篇<a title="https://www.moks.cc/?p=173" href="https://www.moks.cc/?p=173">《国内如何免备案免费设置域名转发》</a></p>
<p>1号红色框填写你要跳转出去的域名，需要你另外申请一个域名，例如 moks2.cc ∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610214940.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610214940.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610214940.png" /></a></p>
<p>1号红框内什么都不用填，2号红框输入博客域名https://www.moks.cc（注意前面的https://也要输入完整），然后添加。∇</p>
<p><a title="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610215601.png" href="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610215601.png"><img src="https://www.moks.cc/wp-content/uploads/2018/06/QQ%E6%88%AA%E5%9B%BE20180610215601.png" /></a></p>
<p>然后再到阿里云那里修改DNS服务器，等生效就可以了，一般秒生效，然后你就可以直接输入新域名，它就会自动跳转到博客的真实网址，不需要再输入https://www.这一大串东西了。</p>
<p>这里稍微解释一下，可能有点绕晕了。</p>
<p>本博客是建在家里的群晖上面的，地址为https://www.moks.cc。</p>
<p>如果我们直接输入www.moks.cc或者moks.cc的话，默认是指向http://www.moks.cc（注意没s），因为国内封掉80端口，所以http://www.moks.cc这个网址是访问不了的，如果要解除80端口封禁，就要备案，而备案一定要购买国内主机才行，那么就失去了群晖建站的意义了，本来我在群晖建站就是打算物尽其用，看上免费这一点。</p>
<p>但是我们可以通过上述的方法，用另一个域名转发来绕开80端口。</p>
<p>这时候你可能有疑问，为什么不能用moks.cc这个域名来自己转发给自己呢？其实一开始我也是这么想的，用moks.cc指向https://www.moks.cc/，但是啊，moks.cc这个域名本来就已经解析有服务器了（本站为例是DNSPOD)，用于群晖的DDNS，DNSPOD需要备案才能设置转发，而备案又要在国内买空间…这时候再设置转发的话，就需要再另外添加解析负责转发的服务器。当然，也不是不可以这样做，但会造成dns解析混乱，我实际操作以后，网站经常会登不上去，ping了一下域名，发现ping到了别的IP地址，不是网站的真正IP地址，所以这个方法本人不太推荐。</p>
<p>其实这里还有一个思路，解析和转发都用同一个DNS服务商。但是需要满足的条件：</p>
<p>1.国外的。因为国内的需要备案才能转发</p>
<p>2.以我为例，可以绑定群晖或者华硕的。</p>
<p>但是，如果用国外的DDNS，万一被墙了就麻烦了，后续变更DNS服务商也是一件麻烦的事。</p>
<p>本文到此基本可以结束了。</p>
<p>在家用群晖建站，优点自然是免费，不需要每年付一笔钱给云主机商，而且容量随便你加，也不用在意流量问题（不过一般个人博客流量都不会很大就是了）</p>
<p>但是相反的缺点也很明显，在国内，如果不购买主机建站的话，80端口是用不了的，这就造成了想要通过简短的域名访问网站非常困难。而且用群晖建站相当于把群晖暴露在外网，容易受到攻击，特别是群晖作为一个家庭甚至公司的储存服务器，里面保存的资料一般来说还是挺重要的，所以仅建议自娱自乐随便玩玩。</p>
<p><strong>2018.8.26更新</strong></p>
<p>最近买了个vps搭建SS，空间还有富余，打算找个时间把博客搬到那上面去试试。这样的话基本就解决掉80端口问题和群晖不安全问题了。</p>
<p><strong>全文完</strong></p>
<p>参考文章：</p>
<p>1.外网访问群晖上的博客详细教程</p>
<p><a title="https://post.smzdm.com/p/536484/" href="https://post.smzdm.com/p/536484/">https://post.smzdm.com/p/536484/</a></p>
<p>2.说说黑群晖和极路由那点事儿 篇二：满负荷使用你的NAS——零基础搭建个人博客及论坛</p>
<p><a title="https://post.smzdm.com/p/310848/" href="https://post.smzdm.com/p/310848/">https://post.smzdm.com/p/310848/</a></p>
<p>3.不用群晖套件架设wordpress博客站点</p>
<p><a title="http://www.gebi1.com/forum.php?mod=viewthread&amp;tid=258148&amp;_dsign=54f0bdbd" href="http://www.gebi1.com/forum.php?mod=viewthread&amp;tid=258148&amp;_dsign=54f0bdbd">http://www.gebi1.com/forum.php?mod=viewthread&amp;tid=258148&amp;_dsign=54f0bdbd</a></p>
<p>4.黑群晖+梅林路由：外网访问NAS整体解决方案</p>
<p><a title="https://post.smzdm.com/p/568990/" href="https://post.smzdm.com/p/568990/">https://post.smzdm.com/p/568990/</a></p>
<p>5.群晖DS418PLAY有什么好玩意之 篇一：DNSPOD外网访问群晖DSM</p>
<p><a title="https://post.smzdm.com/p/622921/" href="https://post.smzdm.com/p/622921/">https://post.smzdm.com/p/622921/</a></p>
<p>6.How to host a website on Synology NAS</p>
<p><a title="https://www.synology.com/en-us/knowledgebase/DSM/tutorial/Application/How_to_host_a_website_on_Synology_NAS" href="https://www.synology.com/en-us/knowledgebase/DSM/tutorial/Application/How_to_host_a_website_on_Synology_NAS">https://www.synology.com/en-us/knowledgebase/DSM/tutorial/Application/How_to_host_a_website_on_Synology_NAS</a></p>
<p>7.群晖下搭建wordpress博客站点</p>
<p><a title="http://www.gebi1.com/thread-257802-1-1.html" href="http://www.gebi1.com/thread-257802-1-1.html">http://www.gebi1.com/thread-257802-1-1.html</a></p>
</div>
      </article>
    </div>
  </body>
</html>
